现代的网络接入技术分为三类：
  1.  二层准入。
      只有通过链路层认证的用户，可以接入网络。如802.1x／eap等等。只有二层准入之后，用户才能获得ip地址。目前家用的无线网络一般采取这种方式。
  2.  三层准入。
      二层链路直接准入，并可以直接通过dhcp获得三层地址。但是在客户访问外部网络时，重定向http进行认证，以达到网络认证的目的。
      一般在接入三层之前，会将用户放置于特殊的vlan（不信任）内，通过vlan进行报文的隔离，而且次vlan的三层网关只允许少量的协议报文（如dhcp，dns）等报文
      通过。
      目前很多酒店会采取这种方式。
      由于采用用户名密码的方式，安全性非常弱。
  3.  客户端方式。
      二层三层的加强版。不仅可以认证，而且扫描用户主机以检查安全性。
      公司一般采取这种方式。
  4.  虚拟桌面的方式。
      rdp.vnc等接入方式，当下在云里面应用广泛。
      
      
      
安全的网络通道：
  1.  ssl    （四层vpn）
      端到端。http常采用这种方式。简单，灵活，配置简单，可以用于精细化管理。tls是ssl基础上发明的，tls1.0=ssl3.0.
      ssl工作在tcp层之上，应用层之下，不存在nat穿越问题。
      ssl即便被攻破也只会暴露一个ip端口。
      ssl的公钥秘钥启示只有在协商对称密钥时才能用到，一旦对成密钥协商完成之后，就会使用对成密钥进行通信：
      http://blog.csdn.net/dfsaggsd/article/details/50910999
      ssl可以分为：
        a). 零客户端，日常使用的https就是使用这种模式。
        b). 瘦客户端，需要下载一个java applet，所有用户的tcp流量，都通过java applet进行分装。（应用层加密）
        c). 隧道模式，和ip-sec类似。隧道模式和ip-sec一样，在三层就进行分装加密。此种模式可以支持大部分的业务流量。
  2.  ip－sec （三层vpn，需要nat穿越）
      站点到站点，对所有报文通过ip－sec－vpn进行加密。ip-sec一般被用于公司的分部和总部之间通信。
      ip－sec是构建在ip层之上，tcp／udp层之下，需要辅助与nat穿越才能在网上部署。
      ip－sec一旦被攻破，整个内部网络都会被暴露在攻击之下。
   
解决网络结构变化(如服务器司机，搬迁等)的手段：
  1.  dns
      可以职能dns来找出最优最近的服务器地址。
      缺点：
        a.  被动性：拓扑改变时，需要一定的传播时间,在cache失效之前，可能存在一定时间的网络不可达。
        b.  一般只适用于web网络，对于非web网络可能就无能为力。
  2.  健康路由注入
      一般放置在负载均衡设备，或者出口路由器上，这些设备可以周期性的探测服务的可达性，并将信息以路由协议的方式扩散出去。如anycast时，一个服务器故障，
      与此设备相邻的出口路由器可以探测到，并将此服务器的ip地址从任意波移除。
      
  3.  lisp（位置/身份分离协议）
      
支持虚拟化数据中心的扩张
  1.  大二层的概念
      一个非常大的二层网络。如果没有mstp而只有stp，则可能造成某些接口被stp协议禁用，造成投资的浪费。如果有mstp协议，同样也会造成网络的复杂。
      无论是否采用mstp，都会造成mac表过大。
  2.  三层终结二层，将整个大二层网络切割成几个小型二层网络。
      由于虚拟机的迁移只能在同一个二层网络下进行（加入迁移的是两个数据中心，那么数据中心的ip地址端很可能都采用10.1.1.0/24，没法路由），有可能造成虚拟机迁移失败。
      https://www.zhihu.com/question/22907100
  3.  Fabric path
      Fabric-path是思科的一种私有路由协议。
      Fabric的主要思想是引入一个Fabric-head的报文头，以此替代mac头。并通过isis协议，发布fabric地址，形成可聚合可快速收敛的二层路由查找系统。
      同时fabric－path的交换机一般只存储本地网络的mac，这就使得mac地址表大大减少。
      Fabric-path采用ttl的方式，以替代stp协议，同时通过isis的等价路由方式，实现不同路径上的负载均衡，而不像stp一样，只能走一条路。
  4.  trill (几乎就是Fabric path的翻版)
  5.  SPB (shortest path bridge).
  
  
  
  FCoE 利用以太网传输存储流量
      传统的存储一般通过光纤进行，而不是通过以太网络。FCoE正是这种技术，以融合存储和网络。
      一个标准的存储区域可以分为：主机，网络和存储，其中存储可以分为
      1.  SAN (存储区域网络).
      2.  DAS (直连式存储).
      FCoE所面对的主要问题：
      1.  以太网是不可靠的传输，可能存在丢包的可能性。
      2.  以太网对服务质量支持有限。
      由于所有存储数据是不能丢失的，所以，FCoE采用了类似tcp滑动窗口的技术，并通过Qos技术获得最高优先级，从而确保端到端不出现报文丢失。
      
  vntag（cisco）:
    在原有的虚拟交换mac报文里加上vntag，表示virtual network interface。但是需要所有交换机和虚拟机都支持vntag。
    vntag,并不如虚拟机高效，应为，同一服务器不同vm之间的流量，需要通过外部交换机的折返，才能回到本地服务器。
    
  vepa(hp) 
    修改生成树协议，
    重用QinQ
    Juniper的Qfabric就是使用的这种方式。
  
传统的大二层技术：  
  vpls：
    1.  通过mpls，将处于不同地域内的网络进行二层互联。内部维持一张mac表和虚拟链路表。通过mac表盒虚拟链路表决定下一跳的转发。
    vpls的缺点，在于完美的模拟二层网络：
        a). 生成树协议，浪费宝贵的广域网连接资源。
        b). ARP学习（由于vpls的arp不仅仅需要和端口绑定，而且需要和广域网出口绑定，消耗很多路由器资源）。
        c). 广播，浪费带宽。二层处理一般在arp表未知的情况下，将报文广播到除原端口之外的所有链路上。
        d). 需要运营商的支持才能进行配置。因为vpls主要运营在pe上. 而且此配置异常复杂。
        e). 需要mpls支持。
   otv（open transport virtualization， 思科的一项专有协议)
        a). 只需要维持ip可达，而不需要像vpls一样，维持一个mpls可达，降低部署成本，减少对mpls的依赖。
        b). 
        
 vxlan:
   1. 协议继承来otv技术，利用三层封装二层链路信息实现跨二层的漂移。
   2. 利用组播，解决了vtep（vxlan tunnel end point）之间广播报文的传递。只有属于同一个vni的vtep才会收到报文。如arp等。
   3. 组播服务一般需要三层运营商提供（为什么？需要看看组播协议）
   
   
 nvgre（microsoft 提供的）
   1. vxlan采用udp作为封装，而nvgre则采用gre技术进行封装。
   2. nvgre也采用组播技术，以支持二层内部的广播报文。
   3. nvgre同样采用24位，作为一个vni的标示。
   4. nvgre的优势在于gre技术是目前早已广泛支持的技术。vxlan技术，则采用udp的sport（包含了源二层头的hash），以此实现负载均衡？（如何实现）？
   
   
ToR/EoR (柜顶接入，列尾接入）
  ToR：每个机柜顶部放置一台交换机，所有的顶部交换机再接入更上层交换机。扩展性好，布线简单，但是管理复杂（节点数目增加，每个节点都需要相应配置，如STp等）。
  EoR：所有机柜的服务器都连入列尾交换机，管理简单（只需管理一台交换机），但是扩展性，布线都非常复杂。
  解决方法：ToR布线，但是采用集联式的交换机，将机顶交换机看成是上层交换机的一个远端模块，将他们统一进行管理。
   
      
      
      
       
        
  
     
      
